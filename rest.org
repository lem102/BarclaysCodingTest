* login :verb:

template http://localhost:5215

** create
:properties:
:Verb-Store: new-user
:end:

post /v1/users
content-type: application/json

{
  "name": "userG",
  "password": "pass"
}

** login
:properties:
:Verb-Store: token
:end:

post /login
content-type: application/json

{
  "name": "{{(verb-json-get (oref (verb-stored-response "new-user") body) "name")}}",
  "password": "pass"
}

* rest :verb:

template http://localhost:5215
authorization: bearer {{(oref (verb-stored-response "token") body)}}

** users

*** get

get /users/{{(verb-json-get (oref (verb-stored-response "new-user") body) "id")}}

*** update

patch /users/{{(verb-json-get (oref (verb-stored-response "new-user") body) "id")}}
content-type: application/json

{
  "name": "jacobwozere"
}

*** delete

delete /users/{{(verb-json-get (oref (verb-stored-response "new-user") body) "id")}}

** bank account

*** create
:properties:
:Verb-Store: new-bank-account
:end:

post /v1/bankaccounts/
content-type: application/json

{
  "name": "jacobBankAccount50"
}

*** list

get /v1/bankaccounts/

*** get

get /v1/bankaccounts/{{(verb-json-get (oref (verb-stored-response "new-bank-account") body) "id")}}

*** update

patch /v1/bankaccounts/{{(verb-json-get (oref (verb-stored-response "new-bank-account") body) "id")}}
content-type: application/json

{
  "name": "newName"
}

*** delete

delete /v1/bankaccounts/{{(verb-json-get (oref (verb-stored-response "new-bank-account") body) "id")}}

*** create transaction

post /v1/bankaccounts/{{(verb-json-get (oref (verb-stored-response "new-bank-account") body) "id")}}/transactions
content-type: application/json

{
  "amount": 5,
  "transactionType": "withdrawal"
}
